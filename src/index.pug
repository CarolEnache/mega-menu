doctype html
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        meta(http-equiv="X-UA-Compatible", content="ie=edge")
        title Document
        link(rel="stylesheet", href="style.css")

    body
      .mega-menu
        each menu, key1 in data.menu
          .parentLink(data-key=key1)
            //- asta-i ala care vrem noi
            a.mainLink(href=`/${menu.parentHref}`)= menu.parentLink
            .mega-menu_drop-down
              a.menu-all-link(href=`${menu.dropdownHeaderHref}`)= menu.dropdownHeaderText
              .test1
                //- each subMenu, key2 in menu.list
                //-   ul.subMenu-lists
                //-     each subMenuList, key3 in subMenu
                //-       li.subMenu-item
                //-         a.subMenu-link(href=`/#`)= subMenuList.text
            if menu.dropDown 
              .mega-menu_drop-down
                each secondMenu in menu.list
                  .parentLinkSecondMenu
                    //- pre= JSON.stringify(secondMenu, null, 2)
                    if secondMenu.parentHref == 'javascript://'
                      .mainLink=secondMenu.parentLink
                        each secondMenuItem in secondMenu.list
                          .mega-menu_drop-down_secondMenu
                            .smecherie
                              each secondMenuSubItem in secondMenuItem
                                if secondMenuSubItem.link
                                  .smecherie2
                                    a.ceva(href='#') #{secondMenuSubItem.text}
                    else
                      a.mainLink(href=`/${secondMenu.parentHref}`)=secondMenu.parentLink
                        each secondMenuItem in secondMenu.list
                          .mega-menu_drop-down_secondMenu
                            .smecherie
                              each secondMenuSubItem in secondMenuItem
                                if secondMenuSubItem.link
                                  .smecherie2
                                    a.ceva(href='#')=secondMenuSubItem.text

      script.
        const menu = !{JSON.stringify(data.menu)};
        let cevaList = [...document.querySelectorAll('.parentLink')]
        cevaList.map( ceva => {
          ceva.addEventListener('mouseover', e => {
            //- console.log(e.currentTarget.dataset.key)
            //- console.log(`construieste pentru ${ceva.dataset.key}`)
            const list = menu[e.currentTarget.dataset.key].list;
            let test1 = ceva.querySelector('.test1');
            test1.innerHTML = '';
            list.map(listm => {
              console.log(listm);

              //- facem ul-ul
              let ul = document.createElement('ul');
              ul.className = "subMenu-lists";
              listm.map(listmm => {
                //- facem li-urile
                let li = document.createElement('li');
                li.className = 'subMenu-item';
                let atag = document.createElement('a');
                atag.className = 'subMenu-link';
                atag.href = '/#'
                atag.innerText = listmm.text;

                li.appendChild(atag);

                ul.appendChild(li);
              });

              test1.appendChild(ul);
            })
            console.log(test1)
          })
        })
        